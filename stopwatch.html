<html>
    <head>
        <link rel="stylesheet" href="/static/styles.css">
        <link rel="stylesheet" href="/static/stopwatch.css">
        <title>
            {{name}}'s stopwatch
        </title>
    </head>
    <body>
        <p id="stopwatch"><span id="stopwatch-text" style="color: #1fec1fb9;">0h 00m 00s</span></p>
        <a href='#' onclick="event.stopPropagation(); addButton()" id="btn" style="display: none;">Send time to account >></a>
        <script>
            var running = false;
            var intervalId;
            var secs = 0;

            function addButton() {
                
            }

            function stop() {
                var elem = document.getElementById('btn');
                elem.style = "display: flex;";

                var elem = document.getElementById('stopwatch-text');
                elem.style = "color: #d90e0eb9;";
                secs = 0;
                
                running = false;
                clearInterval(intervalId);
            }
            
            function start() {
                var elem = document.getElementById('btn');
                elem.style = "display: none;";

                var elem = document.getElementById('stopwatch-text');
                elem.style = "color: #1fec1fb9;";

                function updater() {
                    secs += 1;
                    hours = Math.floor(secs / 3600);
                    minutes = Math.floor((secs%3600) / 60);
                    s = Math.floor(secs % 60);
                    elem.innerHTML = Math.floor(hours/10) + (hours % 10) + "h " + Math.floor(minutes / 10) + (minutes % 10) + "m " + Math.floor(s/10) + (s % 10) + "s";
                }
                
                running = true;
                intervalId = setInterval(updater, 1000);
            }

            document.addEventListener('click', function() {
                if (running) { stop(); }
                else { start(); }
            });
        </script>
    </body>
</html>